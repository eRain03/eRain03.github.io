<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>OSPF题目部分 | 未淼的博客</title>
<meta name="keywords" content="">
<meta name="description" content="SW1、SW2、SW3、RT1 以太链路、RT2 以太链路、FW1、FW2、AC1 之间运行 OSPFv2 和 OSPFv3 协议 注意要求 按照IP 地址从小到大的顺序发布 每个 prefix-list">
<meta name="author" content="未淼">
<link rel="canonical" href="https://erain.fun/posts/tech/ospf%E9%A2%98%E7%9B%AE%E9%83%A8%E5%88%86/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.2738a21a8f4259354ef8232db6a6357622c8ec4dca4c991280ca23151173cfd9.css" integrity="sha256-JziiGo9CWTVO&#43;CMttqY1diLI7E3KTJkSgMojFRFzz9k=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://erain.fun/img/Q.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="https://erain.fun/img/Q.jpg">
<link rel="icon" type="image/png" sizes="32x32" href="https://erain.fun/img/Q.jpg">
<link rel="apple-touch-icon" href="https://erain.fun/Q.jpg">
<link rel="mask-icon" href="https://erain.fun/Q.jpg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><link href="https://fonts.cdnfonts.com/css/code-new-roman" rel="stylesheet">               
<meta property="og:title" content="OSPF题目部分" />
<meta property="og:description" content="SW1、SW2、SW3、RT1 以太链路、RT2 以太链路、FW1、FW2、AC1 之间运行 OSPFv2 和 OSPFv3 协议 注意要求 按照IP 地址从小到大的顺序发布 每个 prefix-list" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://erain.fun/posts/tech/ospf%E9%A2%98%E7%9B%AE%E9%83%A8%E5%88%86/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-03-19T08:45:15+08:00" />
<meta property="article:modified_time" content="2024-03-19T08:45:15+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="OSPF题目部分"/>
<meta name="twitter:description" content="SW1、SW2、SW3、RT1 以太链路、RT2 以太链路、FW1、FW2、AC1 之间运行 OSPFv2 和 OSPFv3 协议 注意要求 按照IP 地址从小到大的顺序发布 每个 prefix-list"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "“文章”",
      "item": "https://erain.fun/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "“技术分享”",
      "item": "https://erain.fun/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "OSPF题目部分",
      "item": "https://erain.fun/posts/tech/ospf%E9%A2%98%E7%9B%AE%E9%83%A8%E5%88%86/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "OSPF题目部分",
  "name": "OSPF题目部分",
  "description": "SW1、SW2、SW3、RT1 以太链路、RT2 以太链路、FW1、FW2、AC1 之间运行 OSPFv2 和 OSPFv3 协议 注意要求 按照IP 地址从小到大的顺序发布 每个 prefix-list",
  "keywords": [
    
  ],
  "articleBody": "SW1、SW2、SW3、RT1 以太链路、RT2 以太链路、FW1、FW2、AC1 之间运行 OSPFv2 和 OSPFv3 协议 注意要求 按照IP 地址从小到大的顺序发布 每个 prefix-list 的序号从 5 开始 按照 IP 地址从小到大的顺序递增 5 route-map 的序号从 10 开始 递增 10 route-map 名称与 prefix-list 名称相同 每个 ACL 序号从 10 开始,按照 IP 地址从小到大的顺序递增 10 OSPFv2部分 SW1、SW2、SW3、RT1、RT2、FW1 之间 OSPFv2 和 OSPFv3 协议 进程1 区域号 0 分别发布 Loopback1 地址路由和产品路由 FW1通告 type1默认路由 RT2 与 AC1 之间运行 OSPFv2 协议,进程 1 区域 1 nssa no-summar AC1 发布 Loopback1 地址路由、管理、产品和营销路由 AC1用 prefix-list 重发布 Loopback3 prefix-list 名称为 AC1-Loopback3-IPv4 SW1\nrouter ospf 1 ospf router-id 10.4.1.1 network 10.4.1.1/32 area 0 network 10.4.11.0/24 area 0 network 10.4.220.0/24 area 0 network 10.4.255.0/30 area 0 network 10.4.255.4/30 area 0 network 10.4.255.12/30 area 0 network 192.168.2.0/24 area 0 ! SW2\nrouter ospf 1 ospf router-id 10.4.2.1 network 10.4.2.1/32 area 0 network 10.4.21.0/24 area 0 network 10.4.210.0/24 area 0 network 10.4.255.0/30 area 0 network 10.4.255.8/30 area 0 network 10.4.255.20/30 area 0 network 192.168.100.0/24 area 0 SW3\nrouter ospf 1 ospf router-id 10.4.3.1 network 10.4.3.1/32 area 0 network 10.4.31.0/24 area 0 network 10.4.255.4/30 area 0 network 10.4.255.8/30 area 0 ! AC1\nrouter ospf 1 ospf router-id 10.4.4.1 area 1 nssa no-summary network 10.4.4.1/32 area 1 network 10.4.130.0/24 area 1 network 10.4.140.0/24 area 1 network 10.4.150.0/24 area 1 network 10.4.255.44/30 area 1 redistribute connected route-map AC1-Loopback3-IPv4 ip prefix-list AC1-Loopback3-IPv4 seq 5 permit 10.4.4.3/32 route-map AC1-Loopback3-IPv4 permit 10 match ip address prefix-list AC1-Loopback3-IPv4 配置nssa特区 area 1 nssa no-summary\n配置 prefix-list 序号为5 匹配 Loopback4 地址 ip prefix-list AC1-Loopback3-IPv4 seq 5 permit 10.4.4.3/32 配置 route-map 序号为 10 匹配AC1-Loopback3-IPv4 通过\nroute-map AC1-Loopback3-IPv4 permit 10 match ip address prefix-list AC1-Loopback3-IPv4 过滤重发布 redistribute connected route-map AC1-Loopback3-IPv4\nRT1\nrouter ospf 1 router-id 10.4.5.1 network 10.4.5.1 255.255.255.255 area 0 network 10.4.255.16 255.255.255.252 area 0 network 10.4.255.20 255.255.255.252 area 0 network 10.4.255.32 255.255.255.252 area 0 RT2\nrouter ospf 1 router-id 10.4.6.1 network 10.4.6.1 255.255.255.255 area 0 network 10.4.255.32 255.255.255.252 area 0 network 10.4.255.44 255.255.255.252 area 1 area 1 nssa no-summary 配置nssa特区 area 1 nssa no-summary\nFW1\nrouter ospf 1 router-id 10.4.7.1 default-information originate always type 1 network 10.4.7.1/32 area 0 network 10.4.255.12/30 area 0 network 10.4.255.16/30 area 0 FW1通告type1默认路由 default-information originate always type 1\nFW2\nrouter ospf 2 router-id 10.4.8.1 network 10.4.8.1/32 area 2 network 10.4.255.24/30 area 2 network 10.4.255.28/30 area 2 RT1 FW2 SW3 模拟办事处之间运行 OSPFv2协议 进程 2 区域 2 SW3 模拟办事处发布 Loopback2、产品和营销路由 FW2发布 Loopback1 路由。 RT1 发布 Loopback4 路由,向该区域通告 type1默认路由 RT1 用 prefix-list 匹配 SW3 模拟办事处 Loopback2 和产品路由、 FW2 Loopback1 路由(prefix-list 名称分别为 SW3-FW2-IPv4 RT1 与 FW2 直连 IPv4 路由(prefix-list 名称为RT1-FW2-IPv4) 以上路由重发布到 process 1 RT1\nrouter ospf 2 router-id 10.4.5.4 network 10.4.5.4 255.255.255.255 area 2 network 10.4.255.24 255.255.255.252 area 2 default-information originate always metric-type 1 FW2\nrouter ospf 2 router-id 10.4.8.1 network 10.4.8.1/32 area 2 network 10.4.255.24/30 area 2 network 10.4.255.28/30 area 2 SW3\n! router ospf 2 vrf Office ospf router-id 10.4.3.2 network 10.4.3.2/32 area 2 network 10.4.110.0/24 area 2 network 10.4.120.0/24 area 2 network 10.4.255.28/30 area 2 ! 重发布\nprefix-list 匹配 SW3 模拟办事处 Loopback2 产品路由 FW2 Loopback1 路由prefix-list 名称为 SW3-FW2-IPv4\nRT1\n配置prefix-list\nip prefix-list SW3-FW2-IPv4 seq 5 permit 10.4.3.2/32 ip prefix-list SW3-FW2-IPv4 seq 10 permit 10.4.8.1/32 ip prefix-list SW3-FW2-IPv4 seq 15 permit 10.4.110.0/24 配置route-map\nroute-map SW3-FW2-IPv4 10 permit match ip address prefix-list SW3-FW2-IPv4 重发布到 进程 1\nrouter ospf 1 redistribute ospf 2 route-map SW3-FW2-IPv4 RT1 与 FW2 直连 IPv4 路由(prefix-list 名称为RT1-FW2-IPv4) 以上路由重发布到 process 1\nip prefix-list RT1-FW2-IPv4 seq 5 permit 10.4.255.24/30 route-map RT1-FW2-IPv4 10 permit match ip address prefix-list RT1-FW2-IPv4 router ospf 1 redistribute connect route-map RT1-FW2-IPv4 修改 ospf cost 为 100,实现 SW1 分别与 RT2、FW2 之间 IPv4 和 IPv6互访流量优先通过 SW1-SW2-RT1 链路转发,SW2 访问 Internet IPv4和 IPv6 流量优先通过 SW2-SW1-FW1 链路转发 四条链路全部配置Cost花费100\nip ospf cost 100 ipv6 ospf cost 100 OSPFv6部分 SW1、SW2、SW3、RT1、RT2、FW1 OSPFv3 协议process1 area 0 分别发布Loopback1 地址路由和产品路由 FW1 通告 type1默认路由 RT2 与 AC1 之间运行 OSPFv3 协议,process 1,area 1 stub no-summary AC1 发布 Loopback1 地址路由、管理、产品和营销路由 RT1、FW2、SW3 模拟办事处之间运行 OSPFv3 协议 process2 area 2 SW3 模拟办事处发布 Loopback2、产品和营销路由 FW2发布 Loopback1 路由 RT1 发布 Loopback4 路由 向该区域通告 type1默认路由 RT1 用 prefix-list 匹配 SW3 模拟办事处 Loopback2 和产品路由、 FW2 Loopback1 路由(prefix-list 名称分别为 SW3-FW2-IPv4和 SW3-FW2-IPv6)、RT1 与 FW2 直连 IPv4 路由(prefix-list 名称为RT1-FW2-IPv4),以上路由重发布到 process 1。 SW1\n! router ipv6 ospf 1 router-id 10.4.1.1 ! router ipv6 ospf 2 vrf Finance router-id 10.4.1.2 ! interface Vlan1019 ip ospf cost 100 ipv6 ospf cost 100 ipv6 router ospf area 0 tag 1 ip address 10.4.255.14 255.255.255.252 ! interface Vlan1020 ipv6 router ospf area 0 tag 1 ip address 10.4.255.5 255.255.255.252 ! interface Vlan1023 ip ospf cost 100 ipv6 router ospf area 0 tag 1 ip address 10.4.255.1 255.255.255.252 ! interface Vlan1024 ip vrf forwarding Finance ipv6 router ospf area 2 tag 2 ip address 10.4.255.1 255.255.255.252 ! interface Loopback1 ipv6 address 2001:10:4:1::1/128 ipv6 router ospf area 0 tag 1 ip address 10.4.1.1 255.255.255.255 ! interface Loopback2 ip vrf forwarding Finance ipv6 address 2001:10:4:1::2/128 ipv6 router ospf area 2 tag 2 ip address 10.4.1.2 255.255.255.255 ! SW2\ninterface Vlan21 ipv6 address 2001:10:4:21::1/64 ipv6 router ospf area 0 tag 1 interface Vlan1019 ip ospf cost 100 ipv6 ospf cost 100 ipv6 router ospf area 0 tag 1 ip address 10.4.255.22 255.255.255.252 ! interface Vlan1020 ipv6 router ospf area 0 tag 1 ip address 10.4.255.9 255.255.255.252 ! interface Vlan1023 ip ospf cost 100 ipv6 router ospf area 0 tag 1 ip address 10.4.255.2 255.255.255.252 ! interface Vlan1024 ip vrf forwarding Finance ipv6 router ospf area 2 tag 2 ip address 10.4.255.2 255.255.255.252 ! interface Loopback1 ipv6 address 2001:10:4:2::1/128 ipv6 router ospf area 0 tag 1 interface Loopback2 ip vrf forwarding Finance ipv6 address 2001:10:4:2::2/128 ipv6 router ospf area 2 tag 2 ip address 10.4.2.2 255.255.255.255 router ipv6 ospf 1 router-id 10.4.2.1 ! router ipv6 ospf 2 vrf Finance router-id 10.4.2.2 SW3\ninterface Vlan31 ipv6 address 2001:10:4:31::1/64 ipv6 router ospf area 0 tag 1 ip address 10.4.31.1 255.255.255.0 ! interface Vlan110 ip vrf forwarding Office ipv6 address 2001:10:4:110::1/64 ipv6 router ospf area 2 tag 2 ip address 10.4.110.1 255.255.255.0 ! interface Vlan120 ip vrf forwarding Office ipv6 address 2001:10:4:120::1/64 ipv6 router ospf area 2 tag 2 ip address 10.4.120.1 255.255.255.0 ! interface Vlan1015 ip vrf forwarding Office ipv6 router ospf area 2 tag 2 ip address 10.4.255.30 255.255.255.252 ! interface Vlan1019 ipv6 router ospf area 0 tag 1 ip address 10.4.255.6 255.255.255.252 ! interface Vlan1020 ipv6 router ospf area 0 tag 1 ip address 10.4.255.10 255.255.255.252 ! interface Loopback1 ipv6 address 2001:10:4:3::1/128 ipv6 router ospf area 0 tag 1 ip address 10.4.3.1 255.255.255.255 ! interface Loopback2 ip vrf forwarding Office ipv6 address 2001:10:4:3::2/128 ipv6 router ospf area 2 tag 2 ip address 10.4.3.2 255.255.255.255 ! AC1\ninterface Vlan130 ipv6 address 2001:10:4:130::1/64 ipv6 router ospf area 1 tag 1 ip address 10.4.130.1 255.255.255.0 ! interface Vlan140 ipv6 address 2001:10:4:140::1/64 ipv6 router ospf area 1 tag 1 ip address 10.4.140.1 255.255.255.0 ! interface Vlan150 ipv6 address 2001:10:4:150::1/64 ipv6 router ospf area 1 tag 1 ip address 10.4.150.1 255.255.255.0 ! interface Vlan1001 ipv6 router ospf area 1 tag 1 ip address 10.4.255.46 255.255.255.252 ! interface Loopback1 ipv6 address 2001:10:4:4::1/128 ipv6 router ospf area 1 tag 1 ip address 10.4.4.1 255.255.255.255 ! ! router ipv6 ospf 1 router-id 10.4.4.1 area 1 stub no-summary RT1\nrouter ospfv3 1 router-id 10.4.5.1 redistribute ospf 2 route-map SW3-FW2-IPv6 router ospfv3 2 router-id 10.4.5.4 interface Loopback1 ip address 10.4.5.1 255.255.255.255 ipv6 enable ipv6 address 2001:10:4:5::1/128 ipv6 ospf 1 area 0 interface Loopback4 ip address 10.4.5.4 255.255.255.255 ipv6 address 2001:10:4:5::4/128 ipv6 ospf 2 area 2 interface GigaEthernet0/0 ip address 10.4.255.33 255.255.255.252 ipv6 enable ipv6 ospf 1 area 0 interface GigaEthernet0/1 ip address 10.4.255.18 255.255.255.252 ipv6 enable ip ospf cost 100 ipv6 ospf 1 area 0 ipv6 ospf cost 100 interface GigaEthernet0/2 ip address 10.4.255.21 255.255.255.252 ipv6 enable ip ospf cost 100 ipv6 ospf 1 area 0 ipv6 ospf cost 100 interface GigaEthernet0/3 ip address 10.4.255.25 255.255.255.252 ipv6 enable ipv6 ospf 2 area 2 RT2\nrouter ospfv3 1 router-id 10.4.6.5 area 1 stub no-summary interface Loopback1 ip address 10.4.6.1 255.255.255.255 ipv6 enable ipv6 address 2001:10:4:6::1/128 ipv6 ospf 1 area 0 interface GigaEthernet0/0 ip address 10.4.255.34 255.255.255.252 ipv6 enable ipv6 ospf 1 area 0 interface GigaEthernet0/1 ip address 10.4.255.45 255.255.255.252 ipv6 enable ipv6 ospf 1 area 1 FW1\ninterface ethernet0/1 zone \"trust\" ip address 10.4.255.13 255.255.255.252 ipv6 enable manage ping ip ospf cost 100 ipv6 ospf 1 area 0 interface ethernet0/2 zone \"trust\" ip address 10.4.255.17 255.255.255.252 ipv6 enable manage ping ip ospf cost 100 ipv6 ospf 1 area 0 exit FW2\ninterface ethernet0/1 zone \"dmz\" ip address 10.4.255.26 255.255.255.252 ipv6 enable manage ping ipv6 ospf 2 area 2 exit interface ethernet0/2 zone \"trust\" ip address 10.4.255.29 255.255.255.252 ipv6 enable manage ping ipv6 ospf 2 area 2 exit interface loopback1 zone \"trust\" ip address 10.4.8.1 255.255.255.255 ipv6 enable ipv6 address 2001:10:4:8::1/128 manage ping ipv6 ospf 2 area 2 重发布\n! route-map SW3-FW2-IPv6 10 permit match ipv6 address prefix-list SW3-FW2-IPv6 ! ! ipv6 prefix-list SW3-FW2-IPv6 seq 5 permit 2001:10:4:3::2/128 ipv6 prefix-list SW3-FW2-IPv6 seq 10 permit 2001:10:4:8::1/128 ipv6 prefix-list SW3-FW2-IPv6 seq 15 permit 2001:10:4:110::/64 router ospfv3 1 router-id 10.4.5.1 redistribute ospf 2 route-map SW3-FW2-IPv6 ",
  "wordCount" : "2236",
  "inLanguage": "en",
  "datePublished": "2024-03-19T08:45:15+08:00",
  "dateModified": "2024-03-19T08:45:15+08:00",
  "author":[{
    "@type": "Person",
    "name": "未淼"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://erain.fun/posts/tech/ospf%E9%A2%98%E7%9B%AE%E9%83%A8%E5%88%86/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "未淼的博客",
    "logo": {
      "@type": "ImageObject",
      "url": "https://erain.fun/img/Q.jpg"
    }
  }
}
</script>
    <script src="/css/64336ff59a.js" crossorigin="anonymous"></script>
</head>

<body class=" dark" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://erain.fun" accesskey="h" title="未淼&#39;s Blog (Alt + H)">未淼&#39;s Blog</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://erain.fun/" title="首页">
                    <span><i class='fas fa-home'>&nbsp;</i>首页</span>
                </a>
            </li>
            <li>
                <a href="https://erain.fun/search" title="搜索 (Alt &#43; /)" accesskey=/>
                    <span><i class='fas fa-search'>&nbsp;</i>搜索</span>
                </a>
            </li>
            <li>
                <a href="https://erain.fun/archives/" title="归档">
                    <span><i class='fas fa-clock-rotate-left'>&nbsp;</i>归档</span>
                </a>
            </li>
            <li>
                <a href="https://erain.fun/itools.html" title="工具站">
                    <span><i class='fas fa-tools'>&nbsp;</i>工具站</span>
                </a>
            </li>
            <li>
                <a href="https://erain.fun/links" title="链接">
                    <span><i class='fas fa-link'></i>链接</span>
                </a>
            </li>
            <li>
                <a href="https://erain.fun/about" title="关于">
                    <span><i class='fas fa-user-plus'>&nbsp;</i>关于</span>
                </a>
            </li>
            <li>
                <a href="https://erain.fun/index.xml" title="RSS">
                    <span><i class='fas fa-rss'>&nbsp;</i>RSS</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://erain.fun">Home</a>&nbsp;»&nbsp;<a href="https://erain.fun/posts/">“文章”</a>&nbsp;»&nbsp;<a href="https://erain.fun/posts/tech/">“技术分享”</a></div>
    <h1 class="post-title entry-hint-parent">
      OSPF题目部分
    </h1>
    <div class="post-meta"><span title='2024-03-19 08:45:15 +0800 CST'>2024年3月19日</span>&nbsp;|&nbsp;未淼





</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#sw1sw2sw3rt1-%e4%bb%a5%e5%a4%aa%e9%93%be%e8%b7%afrt2-%e4%bb%a5%e5%a4%aa%e9%93%be%e8%b7%affw1fw2ac1-%e4%b9%8b%e9%97%b4%e8%bf%90%e8%a1%8c-ospfv2-%e5%92%8c-ospfv3-%e5%8d%8f%e8%ae%ae" aria-label="SW1、SW2、SW3、RT1 以太链路、RT2 以太链路、FW1、FW2、AC1 之间运行 OSPFv2 和 OSPFv3 协议">SW1、SW2、SW3、RT1 以太链路、RT2 以太链路、FW1、FW2、AC1 之间运行 OSPFv2 和 OSPFv3 协议</a><ul>
                            
                    <li>
                        <a href="#%e6%b3%a8%e6%84%8f%e8%a6%81%e6%b1%82" aria-label="注意要求">注意要求</a></li>
                    <li>
                        <a href="#ospfv2%e9%83%a8%e5%88%86" aria-label="OSPFv2部分">OSPFv2部分</a><ul>
                            
                    <li>
                        <a href="#sw1sw2sw3rt1rt2fw1-%e4%b9%8b%e9%97%b4-ospfv2-%e5%92%8c-ospfv3-%e5%8d%8f%e8%ae%ae" aria-label="SW1、SW2、SW3、RT1、RT2、FW1 之间 OSPFv2 和 OSPFv3 协议">SW1、SW2、SW3、RT1、RT2、FW1 之间 OSPFv2 和 OSPFv3 协议</a></li></ul>
                    </li>
                    <li>
                        <a href="#ospfv6%e9%83%a8%e5%88%86" aria-label="OSPFv6部分">OSPFv6部分</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;
    }
</script>


  <div class="post-content"><h2 id="sw1sw2sw3rt1-以太链路rt2-以太链路fw1fw2ac1-之间运行-ospfv2-和-ospfv3-协议">SW1、SW2、SW3、RT1 以太链路、RT2 以太链路、FW1、FW2、AC1 之间运行 OSPFv2 和 OSPFv3 协议<a hidden class="anchor" aria-hidden="true" href="#sw1sw2sw3rt1-以太链路rt2-以太链路fw1fw2ac1-之间运行-ospfv2-和-ospfv3-协议">#</a></h2>
<h3 id="注意要求">注意要求<a hidden class="anchor" aria-hidden="true" href="#注意要求">#</a></h3>
<ul>
<li>按照IP 地址从小到大的顺序发布</li>
<li>每个 prefix-list 的序号从 5 开始 按照 IP 地址从小到大的顺序递增 5</li>
<li>route-map 的序号从 10 开始  递增 10  route-map 名称与 prefix-list 名称相同</li>
<li>每个 ACL 序号从 10 开始,按照 IP 地址从小到大的顺序递增 10</li>
</ul>
<h3 id="ospfv2部分">OSPFv2部分<a hidden class="anchor" aria-hidden="true" href="#ospfv2部分">#</a></h3>
<h4 id="sw1sw2sw3rt1rt2fw1-之间-ospfv2-和-ospfv3-协议">SW1、SW2、SW3、RT1、RT2、FW1 之间 OSPFv2 和 OSPFv3 协议<a hidden class="anchor" aria-hidden="true" href="#sw1sw2sw3rt1rt2fw1-之间-ospfv2-和-ospfv3-协议">#</a></h4>
<ul>
<li><input checked="" disabled="" type="checkbox"> 进程1 区域号 0 分别发布 Loopback1 地址路由和产品路由</li>
<li><input checked="" disabled="" type="checkbox"> FW1通告 type1默认路由</li>
<li><input checked="" disabled="" type="checkbox"> RT2 与 AC1 之间运行 OSPFv2 协议,进程 1 区域 1 nssa no-summar</li>
<li><input checked="" disabled="" type="checkbox"> AC1 发布 Loopback1 地址路由、管理、产品和营销路由</li>
<li><input checked="" disabled="" type="checkbox"> AC1用 prefix-list 重发布 Loopback3  prefix-list 名称为 AC1-Loopback3-IPv4</li>
</ul>
<p>SW1</p>
<pre><code>router ospf 1
 ospf router-id 10.4.1.1
 network 10.4.1.1/32 area 0
 network 10.4.11.0/24 area 0
 network 10.4.220.0/24 area 0
 network 10.4.255.0/30 area 0
 network 10.4.255.4/30 area 0
 network 10.4.255.12/30 area 0
 network 192.168.2.0/24 area 0
!
</code></pre>
<p>SW2</p>
<pre><code>router ospf 1
 ospf router-id 10.4.2.1
 network 10.4.2.1/32 area 0
 network 10.4.21.0/24 area 0
 network 10.4.210.0/24 area 0
 network 10.4.255.0/30 area 0
 network 10.4.255.8/30 area 0
 network 10.4.255.20/30 area 0
 network 192.168.100.0/24 area 0
</code></pre>
<p>SW3</p>
<pre><code>router ospf 1
 ospf router-id 10.4.3.1
 network 10.4.3.1/32 area 0
 network 10.4.31.0/24 area 0
 network 10.4.255.4/30 area 0
 network 10.4.255.8/30 area 0
!
</code></pre>
<p>AC1</p>
<pre><code>router ospf 1
 ospf router-id 10.4.4.1
 area 1 nssa no-summary
 network 10.4.4.1/32 area 1
 network 10.4.130.0/24 area 1
 network 10.4.140.0/24 area 1
 network 10.4.150.0/24 area 1
 network 10.4.255.44/30 area 1
redistribute connected route-map AC1-Loopback3-IPv4
 
ip prefix-list AC1-Loopback3-IPv4 seq 5 permit 10.4.4.3/32
route-map AC1-Loopback3-IPv4 permit 10
  match ip address prefix-list AC1-Loopback3-IPv4

</code></pre>
<blockquote>
<p>配置nssa特区
area 1 nssa no-summary</p>
</blockquote>
<p>配置 prefix-list 序号为5 匹配 Loopback4 地址
<code>ip prefix-list AC1-Loopback3-IPv4 seq 5 permit 10.4.4.3/32</code>
配置 route-map 序号为 10 匹配AC1-Loopback3-IPv4 通过</p>
<pre><code>route-map AC1-Loopback3-IPv4 permit 10
  match ip address prefix-list AC1-Loopback3-IPv4
</code></pre>
<p>过滤重发布
<code>redistribute connected route-map AC1-Loopback3-IPv4</code></p>
<p>RT1</p>
<pre><code>router ospf 1
 router-id 10.4.5.1
 network 10.4.5.1 255.255.255.255 area 0
 network 10.4.255.16 255.255.255.252 area 0
 network 10.4.255.20 255.255.255.252 area 0
 network 10.4.255.32 255.255.255.252 area 0
</code></pre>
<p>RT2</p>
<pre><code>router ospf 1
 router-id 10.4.6.1
 network 10.4.6.1 255.255.255.255 area 0
 network 10.4.255.32 255.255.255.252 area 0
 network 10.4.255.44 255.255.255.252 area 1
 area 1 nssa no-summary
</code></pre>
<blockquote>
<p>配置nssa特区
area 1 nssa no-summary</p>
</blockquote>
<p>FW1</p>
<pre><code>  router ospf 1
    router-id 10.4.7.1
    default-information originate always type 1
    network 10.4.7.1/32 area 0
    network 10.4.255.12/30 area 0
    network 10.4.255.16/30 area 0
</code></pre>
<blockquote>
<p>FW1通告type1默认路由
default-information originate always type 1</p>
</blockquote>
<p>FW2</p>
<pre><code>  router ospf 2
    router-id 10.4.8.1
    network 10.4.8.1/32 area 2
    network 10.4.255.24/30 area 2
    network 10.4.255.28/30 area 2

</code></pre>
<ul>
<li><input checked="" disabled="" type="checkbox"> RT1  FW2  SW3 模拟办事处之间运行 OSPFv2协议  进程 2 区域 2</li>
<li><input checked="" disabled="" type="checkbox"> SW3 模拟办事处发布 Loopback2、产品和营销路由</li>
<li><input checked="" disabled="" type="checkbox"> FW2发布 Loopback1 路由。</li>
<li><input checked="" disabled="" type="checkbox"> RT1 发布 Loopback4 路由,向该区域通告 type1默认路由</li>
<li><input checked="" disabled="" type="checkbox"> RT1 用 prefix-list 匹配 SW3 模拟办事处 Loopback2 和产品路由、 FW2 Loopback1 路由(prefix-list 名称分别为 SW3-FW2-IPv4</li>
<li><input checked="" disabled="" type="checkbox"> RT1 与 FW2 直连 IPv4 路由(prefix-list 名称为RT1-FW2-IPv4)  以上路由重发布到 process 1</li>
</ul>
<p>RT1</p>
<pre><code>router ospf 2
 router-id 10.4.5.4
 network 10.4.5.4 255.255.255.255 area 2
 network 10.4.255.24 255.255.255.252 area 2
 
 default-information originate always metric-type 1
 
</code></pre>
<p>FW2</p>
<pre><code>  router ospf 2
    router-id 10.4.8.1
    network 10.4.8.1/32 area 2
    network 10.4.255.24/30 area 2
    network 10.4.255.28/30 area 2
</code></pre>
<p>SW3</p>
<pre><code>!
router ospf 2 vrf Office
 ospf router-id 10.4.3.2
 network 10.4.3.2/32 area 2
 network 10.4.110.0/24 area 2
 network 10.4.120.0/24 area 2
 network 10.4.255.28/30 area 2
!
</code></pre>
<p>重发布</p>
<p>prefix-list 匹配 SW3 模拟办事处 Loopback2  产品路由  FW2 Loopback1 路由prefix-list 名称为 SW3-FW2-IPv4</p>
<p>RT1</p>
<p>配置prefix-list</p>
<pre><code>ip prefix-list SW3-FW2-IPv4 seq 5 permit 10.4.3.2/32
ip prefix-list SW3-FW2-IPv4 seq 10 permit 10.4.8.1/32
ip prefix-list SW3-FW2-IPv4 seq 15 permit 10.4.110.0/24
</code></pre>
<p>配置route-map</p>
<pre><code>route-map SW3-FW2-IPv4 10 permit
 match ip address prefix-list SW3-FW2-IPv4
</code></pre>
<p>重发布到 进程 1</p>
<pre><code>router ospf 1
redistribute ospf 2 route-map SW3-FW2-IPv4
</code></pre>
<p>RT1 与 FW2 直连 IPv4 路由(prefix-list 名称为RT1-FW2-IPv4)  以上路由重发布到 process 1</p>
<pre><code>ip prefix-list RT1-FW2-IPv4 seq 5 permit 10.4.255.24/30
route-map RT1-FW2-IPv4 10 permit
 match ip address prefix-list RT1-FW2-IPv4

router ospf 1
  redistribute connect route-map RT1-FW2-IPv4
</code></pre>
<ul>
<li>修改 ospf cost 为 100,实现 SW1 分别与 RT2、FW2 之间 IPv4 和 IPv6互访流量优先通过 SW1-SW2-RT1 链路转发,SW2 访问 Internet IPv4和 IPv6 流量优先通过 SW2-SW1-FW1 链路转发
<img loading="lazy" src="https://s2.loli.net/2024/07/12/N9vc3wxyAZslrYQ.png" alt="21-14-22.png"  />
</li>
</ul>
<blockquote>
<p>四条链路全部配置Cost花费100</p>
</blockquote>
<pre><code> ip ospf cost 100
 ipv6 ospf cost 100 
</code></pre>
<h3 id="ospfv6部分">OSPFv6部分<a hidden class="anchor" aria-hidden="true" href="#ospfv6部分">#</a></h3>
<ul>
<li><input disabled="" type="checkbox"> SW1、SW2、SW3、RT1、RT2、FW1 OSPFv3 协议process1  area 0  分别发布Loopback1 地址路由和产品路由   FW1 通告 type1默认路由</li>
<li><input disabled="" type="checkbox"> RT2 与 AC1 之间运行 OSPFv3 协议,process 1,area 1 stub no-summary</li>
<li><input disabled="" type="checkbox"> AC1 发布 Loopback1 地址路由、管理、产品和营销路由</li>
<li><input disabled="" type="checkbox"> RT1、FW2、SW3 模拟办事处之间运行 OSPFv3 协议  process2  area 2</li>
<li><input disabled="" type="checkbox"> SW3 模拟办事处发布 Loopback2、产品和营销路由  FW2发布 Loopback1 路由 RT1 发布 Loopback4 路由  向该区域通告 type1默认路由</li>
<li><input disabled="" type="checkbox"> RT1 用 prefix-list 匹配 SW3 模拟办事处 Loopback2 和产品路由、 FW2 Loopback1 路由(prefix-list 名称分别为 SW3-FW2-IPv4和 SW3-FW2-IPv6)、RT1 与 FW2 直连 IPv4 路由(prefix-list 名称为RT1-FW2-IPv4),以上路由重发布到 process 1。</li>
</ul>
<p>SW1</p>
<pre><code>!
router ipv6 ospf 1
 router-id 10.4.1.1
!
router ipv6 ospf 2 vrf Finance
 router-id 10.4.1.2
!

interface Vlan1019
 ip ospf cost 100
 ipv6 ospf cost 100
 ipv6 router ospf area 0 tag 1
 ip address 10.4.255.14 255.255.255.252
!
interface Vlan1020
 ipv6 router ospf area 0 tag 1
 ip address 10.4.255.5 255.255.255.252
!         
interface Vlan1023
 ip ospf cost 100
 ipv6 router ospf area 0 tag 1
 ip address 10.4.255.1 255.255.255.252
!
interface Vlan1024
 ip vrf forwarding Finance
 ipv6 router ospf area 2 tag 2
 ip address 10.4.255.1 255.255.255.252
!
interface Loopback1
 ipv6 address 2001:10:4:1::1/128
 ipv6 router ospf area 0 tag 1
 ip address 10.4.1.1 255.255.255.255
!
interface Loopback2
 ip vrf forwarding Finance
 ipv6 address 2001:10:4:1::2/128
 ipv6 router ospf area 2 tag 2
 ip address 10.4.1.2 255.255.255.255
!

</code></pre>
<p>SW2</p>
<pre><code>interface Vlan21
 ipv6 address 2001:10:4:21::1/64
 ipv6 router ospf area 0 tag 1


interface Vlan1019
 ip ospf cost 100
 ipv6 ospf cost 100
 ipv6 router ospf area 0 tag 1
 ip address 10.4.255.22 255.255.255.252
!
interface Vlan1020
 ipv6 router ospf area 0 tag 1
 ip address 10.4.255.9 255.255.255.252
!
interface Vlan1023
 ip ospf cost 100
 ipv6 router ospf area 0 tag 1
 ip address 10.4.255.2 255.255.255.252
!
interface Vlan1024
 ip vrf forwarding Finance
 ipv6 router ospf area 2 tag 2
 ip address 10.4.255.2 255.255.255.252
!
interface Loopback1
 ipv6 address 2001:10:4:2::1/128
 ipv6 router ospf area 0 tag 1

interface Loopback2
 ip vrf forwarding Finance
 ipv6 address 2001:10:4:2::2/128
 ipv6 router ospf area 2 tag 2
 ip address 10.4.2.2 255.255.255.255




router ipv6 ospf 1
 router-id 10.4.2.1
!
router ipv6 ospf 2 vrf Finance
 router-id 10.4.2.2

</code></pre>
<p>SW3</p>
<pre><code>interface Vlan31
 ipv6 address 2001:10:4:31::1/64
 ipv6 router ospf area 0 tag 1
 ip address 10.4.31.1 255.255.255.0
!

interface Vlan110
 ip vrf forwarding Office
 ipv6 address 2001:10:4:110::1/64
 ipv6 router ospf area 2 tag 2
 ip address 10.4.110.1 255.255.255.0
!
interface Vlan120
 ip vrf forwarding Office
 ipv6 address 2001:10:4:120::1/64
 ipv6 router ospf area 2 tag 2
 ip address 10.4.120.1 255.255.255.0
!
interface Vlan1015
 ip vrf forwarding Office
 ipv6 router ospf area 2 tag 2
 ip address 10.4.255.30 255.255.255.252
!         


interface Vlan1019
 ipv6 router ospf area 0 tag 1
 ip address 10.4.255.6 255.255.255.252
!
interface Vlan1020
 ipv6 router ospf area 0 tag 1
 ip address 10.4.255.10 255.255.255.252
!
interface Loopback1
 ipv6 address 2001:10:4:3::1/128
 ipv6 router ospf area 0 tag 1
 ip address 10.4.3.1 255.255.255.255
!
interface Loopback2
 ip vrf forwarding Office
 ipv6 address 2001:10:4:3::2/128
 ipv6 router ospf area 2 tag 2
 ip address 10.4.3.2 255.255.255.255
!

</code></pre>
<p>AC1</p>
<pre><code>interface Vlan130
 ipv6 address 2001:10:4:130::1/64
 ipv6 router ospf area 1 tag 1
 ip address 10.4.130.1 255.255.255.0
!
interface Vlan140
 ipv6 address 2001:10:4:140::1/64
 ipv6 router ospf area 1 tag 1
 ip address 10.4.140.1 255.255.255.0
!
interface Vlan150
 ipv6 address 2001:10:4:150::1/64
 ipv6 router ospf area 1 tag 1
 ip address 10.4.150.1 255.255.255.0
!       

interface Vlan1001
 ipv6 router ospf area 1 tag 1
 ip address 10.4.255.46 255.255.255.252
!
interface Loopback1
 ipv6 address 2001:10:4:4::1/128
 ipv6 router ospf area 1 tag 1
 ip address 10.4.4.1 255.255.255.255
!

!
router ipv6 ospf 1
 router-id 10.4.4.1
 area 1 stub no-summary
 
</code></pre>
<p>RT1</p>
<pre><code>router ospfv3 1
 router-id 10.4.5.1
 redistribute ospf 2 route-map SW3-FW2-IPv6

router ospfv3 2
 router-id 10.4.5.4

interface Loopback1
 ip address 10.4.5.1 255.255.255.255
 ipv6 enable
 ipv6 address 2001:10:4:5::1/128
 ipv6 ospf 1 area 0 


interface Loopback4
 ip address 10.4.5.4 255.255.255.255
 ipv6 address 2001:10:4:5::4/128
 ipv6 ospf 2 area 2 

interface GigaEthernet0/0
 ip address 10.4.255.33 255.255.255.252
 ipv6 enable
 ipv6 ospf 1 area 0 

interface GigaEthernet0/1
 ip address 10.4.255.18 255.255.255.252
 ipv6 enable
 ip ospf cost 100
 ipv6 ospf 1 area 0 
 ipv6 ospf cost 100 


interface GigaEthernet0/2
 ip address 10.4.255.21 255.255.255.252
 ipv6 enable
 ip ospf cost 100
 ipv6 ospf 1 area 0 
 ipv6 ospf cost 100 


interface GigaEthernet0/3
 ip address 10.4.255.25 255.255.255.252
 ipv6 enable
 ipv6 ospf 2 area 2 
</code></pre>
<p>RT2</p>
<pre><code>router ospfv3 1
 router-id 10.4.6.5
 area 1 stub no-summary


interface Loopback1
 ip address 10.4.6.1 255.255.255.255
 ipv6 enable
 ipv6 address 2001:10:4:6::1/128
 ipv6 ospf 1 area 0 

interface GigaEthernet0/0
 ip address 10.4.255.34 255.255.255.252
 ipv6 enable
 ipv6 ospf 1 area 0 

interface GigaEthernet0/1
 ip address 10.4.255.45 255.255.255.252
 ipv6 enable
 ipv6 ospf 1 area 1 

</code></pre>
<p>FW1</p>
<pre><code>interface ethernet0/1
  zone  &quot;trust&quot;
  ip address 10.4.255.13 255.255.255.252
  ipv6 enable
  manage ping
  ip ospf cost 100
  ipv6 ospf 1 area 0


interface ethernet0/2
  zone  &quot;trust&quot;
  ip address 10.4.255.17 255.255.255.252
  ipv6 enable
  manage ping
  ip ospf cost 100
  ipv6 ospf 1 area 0
exit
</code></pre>
<p>FW2</p>
<pre><code>interface ethernet0/1
  zone  &quot;dmz&quot;
  ip address 10.4.255.26 255.255.255.252
  ipv6 enable
  manage ping
  ipv6 ospf 2 area 2
exit
interface ethernet0/2
  zone  &quot;trust&quot;
  ip address 10.4.255.29 255.255.255.252
  ipv6 enable
  manage ping
  ipv6 ospf 2 area 2
exit

interface loopback1
  zone  &quot;trust&quot;
  ip address 10.4.8.1 255.255.255.255
  ipv6 enable
  ipv6 address 2001:10:4:8::1/128
  manage ping
  ipv6 ospf 2 area 2
</code></pre>
<p>重发布</p>
<pre><code>!
route-map SW3-FW2-IPv6 10 permit
 match ipv6 address prefix-list SW3-FW2-IPv6
!
!
ipv6 prefix-list SW3-FW2-IPv6 seq 5 permit 2001:10:4:3::2/128
ipv6 prefix-list SW3-FW2-IPv6 seq 10 permit 2001:10:4:8::1/128
ipv6 prefix-list SW3-FW2-IPv6 seq 15 permit 2001:10:4:110::/64

router ospfv3 1
 router-id 10.4.5.1
 redistribute ospf 2 route-map SW3-FW2-IPv6
</code></pre>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="https://erain.fun/posts/tech/hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE/">
    <span class="title">« Prev</span>
    <br>
    <span>Hadoop集群配置</span>
  </a>
  <a class="next" href="https://erain.fun/posts/tech/%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E9%A2%98%E7%9B%AE%E7%AD%94%E6%A1%88/">
    <span class="title">Next »</span>
    <br>
    <span>网络设备题目</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>©2020-2023 未淼</span>
    <span>All rights reserved.


    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
